---
emoji: π“
title: "[μ½”λ“μ¤μΏΌλ“] - 220622 TIL"
date: '2022-06-22 10:00:00'
author: ν¬ν‚¤
tags: TIL
categories: TIL
---


## π› **ν•λ£¨ μΌκ³Ό**

> 10:00 ~ 10:30 λ°μΌλ¦¬ μ¤ν¬λΌ  
> 10:30 ~ 12:30 Issue Tracker ν”„λ΅μ νΈ  
> 14:30 ~ 15:40 Dion νΉκ°•  
> 16:00 ~ 18:10 Issue Tracker ν”„λ΅μ νΈ  

<br>

## **π¤ Issue Tracker 8μΌμ°¨**
---

μ¤λλ„ μ‚°ν† λ¦¬μ™€ μ‘μ—…μ„ μ΄μ–΄λ‚κ°”λ‹¤.  
μ¤λμ€ μ¤μ „μ—λ” λ„¤λΉ„κ²μ΄ν„°, μ¤ν›„μ—λ” λ“λΌμ΄λ²„λ΅ μ‘μ—…μ„ μ§„ν–‰ν–λ‹¤.
μ¤‘κ°„μ—λ” λ””μ¨μ νΉκ°•μ΄ μμ—κ³ , μƒκ°μ„ μ •λ¦¬ν•  μ μλ” μ μµν• μ‹κ°„μ΄μ—λ‹¤.

### π“ μ‘μ—…

- μ μ € νμ›κ°€μ… μ‹ λΉ„λ°€λ²νΈ μ•”νΈν™”
  - jbcrypt λΌμ΄λΈλ¬λ¦¬ μ‚¬μ©
- access ν† ν° κ°±μ‹ ν•λ” λ΅μ§ μ‘μ„±

### π’­ κ³ λ―Όμ‚¬ν•­

#### μμ†μ„± μ»¨ν…μ¤νΈμ λ‹¨μ„λ”?

ν„μ¬ μ„λΉ„μ¤μ—μ„λ” jwt ν† ν°μ„ μ‚¬μ©ν•΄μ„ μ‚¬μ©μ μΈμ¦μ„ κµ¬ν„ν–λ‹¤.  
jwtν† ν°μ— μ μ € μ‹λ³„ idλ¥Ό claim κ°’μΌλ΅ λ„£κ³  μμΌλ©° ν† ν° κ²€μ¦ ν›„ userIdλ¥Ό μ‚¬μ©ν•΄μ„ user κ°μ²΄λ¥Ό μ΅°νν•΄μ„ μΈν„°μ…‰ν„°μ—μ„ μ»¨νΈλ΅¤λ¬μ—κ² λ„κ²¨μ¤€λ‹¤.  

``` java

//AuthInterceptorμ preHandle λ©”μ„λ“μ μΌλ¶€

...

jwtProvider.verify(token);

User user = service.findById(userId);

request.setAttribute("user", user);

return true;

```
μ΄μ™€ κ°™μ€ λ°©μ‹μΌλ΅ κµ¬ν„ν• μ΄μ λ” λ€λ¶€λ¶„μ μ”μ²­μ—μ„ μ‚¬μ©μμ μ •λ³΄λ¥Ό μ‚¬μ©ν•κΈ° λ•λ¬Έμ— **μ μ €λ¥Ό μ΅°νν•λ” λ΅μ§μ μ¤‘λ³µμ„ μ¤„μ΄κΈ° μ„ν•¨**μ΄λ‹¤.

ν•μ§€λ§ μ΄λ ‡κ² ν–μ„ κ²½μ° λ¬Έμ κ°€ λ°μƒν–λ‹¤.  
> μ»¨νΈλ΅¤λ¬μ— λ„κ²¨μ¤€ User κ°μ²΄λ” μμ†μ„± μ»¨ν…μ¤νΈμ—μ„ κ΄€λ¦¬λ¥Ό ν•΄μ£Όμ§€ μ•λ”λ‹¤.  
> μ¦‰, μ—”ν‹°ν‹° κ°μ²΄μ κ°’μ΄ λ³€κ²½λλ„ λ”ν‹°μ²΄ν‚Ήμ΄ λ°μƒν•μ§€ μ•κ³  DBμ—λ„ λ³€κ²½μ‚¬ν•­μ„ μ μ©ν•λ” μΏΌλ¦¬κ°€ λ‚ μ•„κ°€μ§€ μ•λ”λ‹¤.

λ‹¨μν μΈν„°μ…‰ν„°μ—μ„ ν•λ‚μ νΈλμ­μ…μ΄ λλ‚¬μΌλ‹ λ‹Ήμ—°ν μ•λλ‹¤κ³  μƒκ°ν–μ§€λ§,
νΈκΈ°μ‹¬μ— μΈν„°μ…‰ν„°μ—μ„λ” userIdλ§ μ„Έν…ν•΄μ£Όκ³  μ–΄λ…Έν…μ΄μ…μ„ μ²λ¦¬ν•΄μ£Όλ” ArgumentResolverμ—μ„ μ μ €λ¥Ό μ΅°ν ν›„ λ°ν™ν•λ„λ΅ μ½”λ“λ¥Ό λ³€κ²½ν•΄λ³΄λ‹ μ»¨νΈλ΅¤λ¬λ΅ λ„μ–΄μ¨ ν•΄λ‹Ή κ°μ²΄λ¥Ό μμ†μ„± μ»¨ν…μ¤νΈμ—μ„ κ΄€λ¦¬ν•΄μ£Όλ”κ²ƒμ„ λ°κ²¬ν–λ‹¤.

```java

//AuthArgumentResolverμ resolveArgumentλ©”μ„λ“

  public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {

      HttpServletRequest request = (HttpServletRequest) webRequest.getNativeRequest();

      String authorization =(String) request.getAttribute("authorization");

      return authService.findUser(authorization);
  }

```

μ–΄λ–¤ μ°¨μ΄κ°€ μλ”μ§€ λ¨λ¥΄κ² μ–΄μ„ λ¨κ°μ½”λ°©μ— κ³„μ‹λ λ΅μΉμ—κ² μ§λ¬Έν•΄λ³Έ κ²°κ³Ό

- μΈν„°μ…‰ν„°μ—μ„ μ΅°νν•΄μ¤λ” κ²½μ°λ” μ €κΈ°μ„ νΈλμ­μ…μ΄ λ‹«νκ³  μ΄ν›„μ— λ‹¤μ‹ μ—΄λ¦¬λ” κµ¬μ΅°λΌμ„ κ·Έλ°κ²ƒ κ°™κ³ , ArgumentResolverμ—μ„ μ΅°νν•λ” κ²½μ°μ—λ” resolver -> controller -> service κΉμ§€ νΈλμ­μ…μ΄ μ—°κ²°λλ” κµ¬μ΅° κ°™λ‹¤.
- μΌλ‹¨ νΈλμ­μ…μ€ μ„λΉ„μ¤ λ‚΄μ—μ„λ§ μ—΄κ³  λ‹«λ”κ² μΆ‹λ‹¤!
- μ¤‘λ³µμ„ μ κ±°ν•κΈ° μ„ν•΄μ„ ν„μ¬ κµ¬μ΅°λ΅ λ§λ“ κ±΄ κ΄μ°®λ‹¤! λ‚μ¤‘μ— μ¤ν”„λ§ μ‹νλ¦¬ν‹° μ‚¬μ©ν•λ©΄ κµ³μ΄ μΈν„°μ…‰ν„°μ—μ„ μ΅°ν μ•ν•΄λ„ ν•΄κ²°μ΄ λλ‹¤ 
- pkλ΅ κ°μ²΄λ¥Ό μ΅°νν•΄μ™€μ•Ό λ”ν‹°μ²΄ν‚Ήμ΄ λλ‹¤!

λΌλ” λ‹µλ³€μ„ λ°›μ•λ‹¤.

μ¶”κ°€μ μΌλ΅ ν•™μµν•΄λ³Ό λ§ν¬κΉμ§€!  
[OSIVμ™€ μ„±λ¥ μµμ ν™”](https://catsbi.oopy.io/eedf92ff-8834-458d-86e4-0ed2e01b5971)

μΌλ‹¨ μ¶”μΈ΅μ„ ν•΄λ³΄μλ©΄, μΈν„°μ…‰ν„°μ—μ„ μ΅°νν• user κ°μ²΄κ°€ `request.setAttribute()`λ¥Ό ν†µν•΄ μ„Έν…λλ” μ‹μ μ— νΈλμ­μ…μ΄ λ‹«νλ” κ²ƒ κ°™λ‹¤. λ°λ©΄ ArgumentResovlerμ—μ„ μ΅°νν•λ” κ²½μ°λ” μ΅°νν• κ°μ²΄λ¥Ό λ°”λ΅ λ°ν™ν•΄μ£ΌκΈ° λ•λ¬Έμ— ν•΄λ‹Ή νΈλμ­μ…μ΄ μ μ§€κ°€ λκ³  μλ”κ±΄κ°€.. λΌκ³  μƒκ°μ„ ν–λ”λ° μ•„μ§ νΈλμ­μ…κ³Ό μμ†μ„± μ»¨ν…μ¤νΈμ— λ€ν• μ΄ν•΄κ°€ λ¶€μ΅±ν•΄μ„ μ¶”κ°€ ν•™μµμ΄ ν•„μ”ν•  κ²ƒ κ°™λ‹¤.

<br>
